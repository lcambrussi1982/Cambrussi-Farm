* {
  box-sizing: border-box
}

:root {
  /* Paleta clara */
  --bg: #f5f7fb;
  --panel: #ffffff;
  --ink: #0b1220;
  --muted: #5f6b85;
  --accent: #22c55e;
  /* verde suave */
  --accent2: #3b82f6;
  /* azul suave */
  --danger: #ef4444;
  --warn: #f59e0b;
  --card: #ffffff;
  --border: rgba(10, 20, 40, .12);
  --radius: 16px;
  --shadow: 0 8px 24px rgba(10, 20, 40, .08);
}

/* Fundo com leves manchas coloridas e claro */
html,
body {
  height: 100%
}

body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  color: var(--ink);
  background:
    radial-gradient(1000px 600px at 80% -10%, rgba(59, 130, 246, .12), transparent 60%),
    radial-gradient(900px 600px at -10% -10%, rgba(34, 197, 94, .10), transparent 60%),
    var(--bg);
}

/* Topbar/Tabs mais claros e translúcidos */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 18px;
  border-bottom: 1px solid var(--border);
  background: rgba(255, 255, 255, .75);
  backdrop-filter: blur(8px);
  position: sticky;
  top: 0;
  z-index: 5;
}

h1 {
  font-size: 20px;
  margin: 0;
  letter-spacing: .5px
}

h1 small {
  font-weight: 600;
  color: var(--muted);
  font-size: 12px;
  margin-left: 8px
}

.balance {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap
}

.balance span {
  color: var(--muted);
  font-size: 14px
}

/* Botões claros */
button {
  background: linear-gradient(180deg, rgba(255, 255, 255, 1), rgba(246, 248, 252, .9));
  color: var(--ink);
  border: 1px solid var(--border);
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: var(--shadow);
  transition: transform .06s ease, box-shadow .2s ease;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 26px rgba(10, 20, 40, .12)
}

button.ghost {
  background: transparent
}

button.danger {
  background: linear-gradient(180deg, rgba(255, 255, 255, 1), rgba(254, 242, 242, .9));
  border-color: rgba(239, 68, 68, .35);
  color: #991b1b;
}

/* Abas claras */
.tabs {
  display: flex;
  gap: 8px;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 56px;
  z-index: 4;
  background: rgba(255, 255, 255, .7);
  backdrop-filter: blur(8px);
  flex-wrap: wrap
}

.tabs button {
  background: var(--card)
}

.tabs .active {
  outline: 2px solid rgba(59, 130, 246, .35)
}

#view {
  padding: 18px;
  max-width: 1200px;
  margin: 0 auto
}

/* Cards claros */
.card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow)
}

.grid {
  display: grid;
  gap: 14px
}

.grid.cols-2 {
  grid-template-columns: repeat(2, minmax(0, 1fr))
}

.grid.cols-3 {
  grid-template-columns: repeat(3, minmax(0, 1fr))
}

.grid.cols-4 {
  grid-template-columns: repeat(4, minmax(0, 1fr))
}

.section h2 {
  margin: 0 0 8px 0;
  font-size: 18px
}

.kv {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px dashed var(--border)
}

.kv:last-child {
  border-bottom: 0
}

.input,
select {
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: #f8fafc;
  color: var(--ink)
}

.row {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap
}

.badge {
  background: #eef2ff;
  border: 1px solid var(--border);
  padding: 6px 8px;
  border-radius: 999px;
  font-size: 12px;
  color: #1e293b
}

.list {
  display: flex;
  flex-direction: column;
  gap: 10px
}

.list .item {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: center;
  padding: 10px;
  background: #f9fbff;
  border: 1px solid var(--border);
  border-radius: 12px
}

.small {
  font-size: 12px;
  color: var(--muted)
}

/* Barra de status clara */
.statusbar {
  position: sticky;
  bottom: 0;
  display: flex;
  gap: 14px;
  justify-content: center;
  padding: 8px;
  color: var(--muted);
  background: rgba(255, 255, 255, .75);
  backdrop-filter: blur(6px);
  border-top: 1px solid var(--border)
}

/* Campo/plots mais claros */
.fieldwrap {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 16px
}

.fieldgrid {
  display: grid;
  grid-template-columns: repeat(10, 48px);
  gap: 6px;
  background: #eef2ff;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--border)
}

.plot {
  width: 48px;
  height: 48px;
  border-radius: 10px;
  border: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  position: relative;
  background: linear-gradient(180deg, #ffffff, #f3f6fb)
}

.plot img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover
}

.plot.ready {
  outline: 2px solid var(--accent)
}

.plot.locked {
  filter: grayscale(1);
  opacity: .5
}

.plot .lbl {
  position: absolute;
  bottom: 2px;
  right: 4px;
  background: rgba(255, 255, 255, .85);
  padding: 2px 4px;
  border-radius: 6px;
  font-size: 10px;
  border: 1px solid var(--border)
}

.plot.dry {
  outline: 2px solid var(--warn)
}

.plot.pest {
  outline: 2px solid var(--danger)
}

/* Silos */
.silo-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px
}

.silo-card {
  display: flex;
  flex-direction: column;
  gap: 10px
}

.silo-card .meter {
  width: 100%;
  height: 10px;
  background: #eaf1ff;
  border: 1px solid var(--border);
  border-radius: 999px;
  overflow: hidden
}

.silo-card .meter>div {
  height: 100%;
  background: linear-gradient(90deg, var(--accent2), var(--accent))
}

/* Overlay da tela inicial (levemente escurecido no tema claro) */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20
}

.overlay.hidden {
  display: none
}

.start-card {
  width: min(680px, 92vw);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 20px;
  box-shadow: var(--shadow);
  padding: 20px
}

.start-card h2 {
  margin: 0 0 8px 0
}

.start-card p {
  color: var(--muted);
  margin: 0 0 10px 0
}

.diff-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  margin: 12px 0
}

.diff {
  padding: 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: #f8fafc
}

.diff h3 {
  margin: 0 0 6px 0
}

.diff .small {
  opacity: .9
}

.diff button {
  width: 100%;
  margin-top: 10px
}

/* Barras de durabilidade (máquinas) no tema claro */
.dur {
  width: 100px;
  height: 8px;
  background: #eaf1ff;
  border: 1px solid var(--border);
  border-radius: 999px;
  overflow: hidden
}

.dur>div {
  height: 100%;
  background: linear-gradient(90deg, #fde68a, #22c55e)
}

@media (max-width: 980px) {
  .fieldwrap {
    grid-template-columns: 1fr
  }

  .fieldgrid {
    grid-template-columns: repeat(10, 40px)
  }

  .plot {
    width: 40px;
    height: 40px
  }
}

@media (max-width: 640px) {

  .grid.cols-2,
  .grid.cols-3,
  .grid.cols-4 {
    grid-template-columns: repeat(1, minmax(0, 1fr))
  }

  .diff-grid {
    grid-template-columns: 1fr
  }
}
/* KPIs */
.kpi-grid{
  display:grid;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:12px;
}
.kpi{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  box-shadow:var(--shadow)
}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-size:20px;font-weight:700;margin-top:6px}
.kpi-hint{font-size:12px;color:var(--muted);margin-top:6px}

/* Sparkline */
.spark{
  color:var(--accent2);
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--card);
  padding:8px;
  overflow:hidden;
  box-shadow:var(--shadow)
}

/* Tabela */
.table{display:grid;gap:6px}
.tr{display:grid;grid-template-columns:1.2fr 1fr 1fr 1fr 1fr 1fr;gap:8px;align-items:center}
.tr>div{padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--card)}
.tr.th>div{font-weight:600;background:#eef2ff}

/* Badge de alerta */
.badge.warn{background:#fff7ed;border-color:#f59e0b;color:#9a3412}
@media (max-width: 980px){
  .kpi-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .tr{grid-template-columns:1fr 1fr 1fr}
  .tr>div:nth-child(n+4){display:none} /* esconde colunas extras no mobile; mantêm Dia/Receita/Despesas */
}


/* ==== FIX RELATÓRIO (KPIs / tabela / spark) ==== */
.kpi-grid{
  display:grid;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:12px;
}
.kpi{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  box-shadow:var(--shadow)
}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-size:20px;font-weight:700;margin-top:6px}
.kpi-hint{font-size:12px;color:var(--muted);margin-top:6px}

.spark{
  color:var(--accent2);
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--card);
  padding:8px; overflow:hidden; box-shadow:var(--shadow)
}

/* Tabela: assegura largura e rolagem horizontal se precisar */
.table{display:block; width:100%; overflow:auto}
.tr{display:grid; grid-template-columns:1.2fr 1fr 1fr 1fr 1fr 1fr; gap:8px; align-items:center; min-width:720px}
.tr>div{padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--card)}
.tr.th>div{font-weight:600;background:#eef2ff}

/* Badge alerta */
.badge.warn{background:#fff7ed;border-color:#f59e0b;color:#9a3412}

/* Grid do relatório: 2 colunas no desktop, 1 no mobile */
.report-grid{display:grid; gap:14px; grid-template-columns:2fr 1fr}
@media (max-width: 1080px){ .kpi-grid{grid-template-columns:repeat(3,minmax(0,1fr))} }
@media (max-width: 800px){
  .kpi-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .report-grid{grid-template-columns:1fr}
}
/* Grid principal do relatório */
.report-grid{display:grid; gap:14px; grid-template-columns:2fr 1fr}
@media (max-width: 800px){ .report-grid{grid-template-columns:1fr} }

/* KPIs */
.kpi-grid{display:grid; grid-template-columns:repeat(5,minmax(0,1fr)); gap:12px}
.kpi{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px; box-shadow:var(--shadow)}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-size:20px;font-weight:700;margin-top:6px}

/* Sparkline */
.spark{color:var(--accent2); border:1px solid var(--border); border-radius:14px; background:var(--card); padding:8px; overflow:hidden; box-shadow:var(--shadow)}

/* Tabela */
.table{display:block; width:100%; overflow:auto}
.tr{display:grid; grid-template-columns:1.4fr 1fr; gap:8px; align-items:center; min-width:520px}
.tr.th>div{font-weight:600;background:#eef2ff}
.tr>div{padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--card)}
/* Tabelas com 2 colunas por padrão; componentes maiores (Fluxo Diário antigo) não são usados aqui */

/* Badge de alerta */
.badge.warn{background:#fff7ed;border-color:#f59e0b;color:#9a3412}

/* Responsivo */
@media (max-width: 1080px){ .kpi-grid{grid-template-columns:repeat(3,minmax(0,1fr))} }
@media (max-width: 800px){ .kpi-grid{grid-template-columns:repeat(2,minmax(0,1fr))} }

.report-grid.cf-reports{max-width:100%;overflow-x:hidden;box-sizing:border-box}
.cf-reports .kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
.cf-reports .kpi .kpi-value{
  display:block;max-width:100%;
  white-space:normal;overflow-wrap:anywhere;
  font-variant-numeric:tabular-nums;font-weight:600;
  font-size:clamp(12px,2.3vw,20px);line-height:1.15
}
